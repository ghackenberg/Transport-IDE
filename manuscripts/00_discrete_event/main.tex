\documentclass[graybox]{svmult}

\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{caption}
\usepackage{subcaption}
\usepackage[colorlinks,linkcolor=blue]{hyperref}
\usepackage{todonotes}
\usepackage{type1cm}
\usepackage{makeidx}
\usepackage{graphicx}
\usepackage{multicol}
\usepackage[bottom]{footmisc}
\usepackage{newtxtext}
\usepackage[varvw]{newtxmath}
\usepackage{wrapfig}

\makeindex

\begin{document}

\title*{A discrete event formalism for fast and accurate transportation system simulation}

\author{Dominik Ascher and Georg Hackenberg}

\institute{
    Dominik Ascher
    \at
    Distributed Artificial Intelligence Laboratory, Faculty of Electrical Engineering and Computer Science, Technical University of Berlin, 10587 Berlin, Germany, \email{ascher@tu-berlin.de}
    \and
    Georg Hackenberg
    \at
    School of Engineering, University of Applied Sciences Upper Austria, 4600 Wels, Austria, \email{georg.hackenberg@fh-wels.at}
}

\maketitle

\abstract{
	The interconnection between intelligent transportation systems (ITS) and services poses fundamental challenges with respect to establishing most efficient structures, infrastructures, as well as intelligent and integrated control strategies addressing new transportation paradigms such as autonomous vehicles, demand-responsive transport as well as the transportation electrification. Systematic methods for efficiently modeling, simulating and evaluating these systems are required, which are able to address aforementioned challenges.
	For this, we present a formalization of essential static properties, dynamic state functions, as well as events concisely describing transportation system design space in the scope of emerging transportation paradigms. Our proposed formalization allows for reduction of simulation complexity by focusing on relevant events impacting the design problem at hand only, while omitting unimportant details negatively impacting simulation performance, thereby reducing both modeling as well as simulation effort. In addition, the provided formalization of system theory and discrete events serves as an interface for deriving well-defined system structure as well as efficient control strategies. 
}

\section{Introduction}
\label{sec:intro}

Meeting sustainability goals and reducing carbon emissions \cite{sachs2019six} is a driving factor of the transformation of transportation systems towards their more efficient operation.
In this, new and connected transportation paradigms such as autonomous vehicles, demand-responsive transport \cite{brake_demand_2004} as well as the transportation electrification \cite{pereirinha2018main} provide fundamental and, more significantly, conjoined drivers towards intelligent transportation systems (ITS) and services.
However, the interconnection between intelligent transportation systems (ITS) and services poses fundamental challenges, in particular with respect to establishing most efficient structures, infrastructures, as well as intelligent and integrated control strategies.
Quality assurance of these systems and services is a critical challenge as constituting systems and services form integrated system-of-systems with heterogeneous system requirements, goals, constraints and stakeholders, which need to be systematically addressed by integrated system design and control strategies.
Therefore, systematic development methods for these challenges as well as these emerging domain paradigms are required.

\subsection{Related work}

To describe, evaluate and compare integrated transportation system design options systematically, we previously introduced an approach for modeling integrated intelligent transportation system properties which addresses scenarios such as vehicle-to-grid (V2G) interactions on both transportation and power systems \cite{Ascher2015}, \cite{Ascher2016} and electrified autonomous mobility-on-demand systems \cite{Ascher2017}.
As simulation complexity increases with the number and dimensionality of states and actions of the modeled systems as well as decreasing sizes of fixed time discretization steps, our approach was limited to microscopic design problems with impeded simulation accuracy, where for instance detection of collision events between traffic participants was dependent on sufficiently small-time discretization and sampling steps.

Discrete-event simulation (DES) represents an approach which significantly reduces simulation complexity by limiting number and dimensionality of actions, while abstracting from discrete-time resolutions.
In recent years, DES has seen increased research attention in both transportation \cite{clemente2013discrete, fanti2017fleet} and power \cite{lebeau2013implementing, ferro2019predictive, lopez2021modeling} domains.
For instance, Clemente et al.~\cite{clemente2013discrete} propose a discrete event simulation approach in the context of car sharing, where a fleet of vehicles is shared and utilized, i.e. driven and parked, by customers.
However, compared to our scope, they do not model the interactions arising from autonomous electric vehicles in the scope of mobility-on-demand systems, such as demand responsive transport and interactions with a charging infrastructure.
Lopez et al.~\cite{lopez2021modeling} model electric vehicle charging and derived hourly and weekly electricity demands using a DES-based model.
They focus on modeling at home charging behavior of electric vehicles of private users, compared to our scope, which instead focuses on modeling both transportation and charging demands of fleets of shared autonomous electric vehicles.
Finally, Li et al.~\cite{li2021simulation} model electric car sharing systems using a discrete-event simulation based approach. For this, they consider infrastructures such as charging stations and links, as well as electric vehicles and transport demands in their proposed model.

\subsection{Problem statement}

Current approaches for modeling, simulating and evaluating transportation system designs are not able to holistically address integrated system challenges.
On the one hand side, transportation infrastructures and control algorithms need to be holistically evaluated, based on the heterogeneous systems they are composed of and the heterogeneous requirements they have to adhere to.
On the other hand side, simulation complexity of integrated systems rises according to model complexity, such as employed discretization of time resolution, as well as number and dimensionality of system states and actions.
While the approach of discrete event simulation is able to address latter problems, current modeling approaches for system design do not offer appropriate domain abstractions in terms of their provided structural and behavioral modeling capabilities to describe these systems on a required level of detail.
In addition, the approaches do not offer support for evaluating heterogeneous application scenarios in terms of their configuration space for new transportation paradigms.
Therefore, we consider it important to assess the following research question: Which set of essential system properties, dynamic state functions as well as events are necessary and relevant for describing integrated system problems in the context of emerging transportation paradigms such as autonomous vehicles, demand-responsive transport and the transportation electrification?

\subsection{Contribution}

To address this situation, in this work, we provide a description and formalization of a concise and essential set of static system properties, dynamic state functions as well as discrete events, which help reduce simulation complexity significantly. 
This is achieved by focusing on relevant events impacting the design problem at hand only, thereby reducing modeling effort and omitting unimportant details negatively impacting simulation performance, while providing a well-defined notation and interface for deriving sound system design structure and efficient control strategies. In summary, we provide the following contributions:

In Section~\ref{sec:theory} we provide a formalization of the underlying system theory of our approach, which focuses on definition of a concise and essential set of static properties and dynamic states for establishing models of transportation systems in the context of autonomous vehicles, demand responsive transport and the transportation electrification.
Then, in Section~\ref{sec:events}, based on introduced system theory, we provide a formalization of discrete events for determining decisions that must be considered for high-performance state computation, where event-based formalization supports abstraction and complexity reduction of system simulation, and can be utilized for deriving well-defined and efficient control strategies. 
Finally, in Section~\ref{sec:con}, we conclude with a short discussion of our approach as well as its application for deriving system designs and control strategies, and provide an outlook on future work.

\section{System theory}
\label{sec:theory}

In the following, we explain the underlying system theory, which is based on our approach for integrated transportation system design, for which we refer to previous work~\cite{Ascher2014,Ascher2015,Ascher2016,Ascher2017}.
We extend and improve upon this approach in this work, where the system theory presented in this work is intended to capture a concise and an essential set of static properties, static calculations, and dynamic states for establishing sound models and control strategies for transportation systems.
These static properties, static calculations, and dynamic states serve as a foundation for further abstraction and reduction of system simulation complexity using discrete events, for which we refer to Section \ref{sec:events}.

\begin{figure}[htbp]
	\centering
	\includegraphics[width=\textwidth]{../../diagrams/model/classes-v0.1.png}
	\caption{Concepts in the class diagram notation of the Unified Modeling Language (UML), where \textit{public} UML attributes and relations represent \textit{static properties}, \textit{public} UML methods represents \textit{static calculations}, and \textit{private} UML attributes and relations represent \textit{dynamic states}.}
	\label{fig:concepts}
\end{figure}

Figure~\ref{fig:concepts} provides an overview of the model concepts, their properties, their calculations, and their states.
Here, we use intersections $i \in I$, segments $s \in S$ as well as locations $l \in L$ for describing properties about the transportation infrastructure.
Then, based on the transportation infrastructure, we use charging stations $cs \in CS$ for describing the provided charging infrastructure.
In addition, we describe transportation demands $d \in D$ on the transportation infrastructure. 
Finally, we use vehicles $v \in V$ for describing transportation supply and capacities.
In the following, we describe each concept in more detail including their static (i.e.\ time-independent) properties as well as their dynamic (i.e.\ time-dependent) state functions typically sampled during computer simulations.
We describe intersections, segments and locations in Section \ref{sec:intersections-segments}, and charging stations, demands as well as vehicles in Section \ref{sec:chargingstations-demands-vehicles}.

\subsection{Intersections, segments and locations}
\label{sec:intersections-segments}

In this Section, we describe intersections and segments of the transportation infrastructure as well as locations. These concepts are visualized in Figure \ref{fig:intersections-segments}.

\begin{figure}[htbp]
	\begin{subfigure}{.3\textwidth}
		\centering
		\includegraphics[scale=0.4]{../../concepts/intersection.png}
		\caption{Intersection}
		\label{fig:intersection}
	\end{subfigure}
	\hfill
	\begin{subfigure}{.3\textwidth}
		\centering
		\includegraphics[scale=0.4]{../../concepts/segment.png}
		\caption{Segment}
		\label{fig:segment}
	\end{subfigure}
	\hfill
		\begin{subfigure}{.3\textwidth}
		\centering
		\includegraphics[scale=0.4]{../../concepts/location.png}
		\caption{Location}
		\label{fig:location}
	\end{subfigure}
    \hfill
	\caption{Intersections, segments and locations.}
	\label{fig:intersections-segments}	
\end{figure}

%\vspace{2mm}
\noindent \textbf{Intersections} (see Figure \ref{fig:intersection}) define the routing points of the transportation infrastructure.
Each intersection must have a coordinate in the corresponding reference coordinate system such as the three-dimensional Euclidean space.
Mathematically, \textit{intersections} can be described as elements $i \in I$ with the following static property functions $P_{I}$:
\begin{itemize}
	\item $P_{I.C}: I \rightarrow \mathbb{R}^3$ represents the coordinate $c = P_{I.C}(i)$ of the intersection $i$ in coordinate system units.
\end{itemize}

\noindent \textbf{Segments} (see Figure \ref{fig:segment}) define the straight roads of the transportation infrastructure.
Each segment must define a source and a target intersection, which represent the start and the end coordinates of the straight road.
The length of the segment can be computed from the coordinates of the source and the target intersection.
Additionally, each segment must define a width and a maximum drive speed.
Mathematically, \textit{segments} can be described as elements $s = (i_s, i_t) \in I \times I = S$ with source intersection $i_s \in I$ and target intersection $i_t \in I$, such that the source intersection $i_s$ is not equal to the target intersection $i_t$, i.e.\ $i_s \neq i_t$.
Then, we define the following static property functions $P_{S}$:
\begin{itemize}
	\item $P_{S.W}: S \rightarrow \mathbb{R}^+$ represents the width $w = P_{S.W}(s)$ of segment $s$ in coordinate system units, and
	\item $P_{S.MDS}: S \rightarrow \mathbb{R}^+$ represents the maximum drive speed $mds = P_{S.MDS}(s)$ of segment $s$ in coordinate system units per time unit.
\end{itemize}
Based on the static property functions $P_S$ we define the following static calculation functions $C_{S}$:
\begin{itemize}
	\item $C_{S.L}: S \rightarrow \mathbb{R}_0^+$ represents the length $l = P_{S.L}(s)$ of segment $s$ in coordinate system units, such that the length $l$ equals to the Euclidean distance between the coordinate $c_s = P_{I.C}(i_s)$ of source intersection $i_s = P_{S.SI}(s)$ and coordinate $c_t = P_{I.C}(i_t)$ of target intersection $i_t = P_{S.TI}(s)$, i.e.\ $l = |c_t - c_s|$.
\end{itemize}

\noindent \textbf{Locations} (see Figure~\ref{fig:location}) define charging station, demand, and vehicle positions on the transportation infrastructure.
Each location must define a segment and a travelled distance on that segment.
Mathematically, \textit{locations} can be described as elements $l = (s, d) \in S \times \mathbb{R}_0^+ = L$ with segment $s$ and distance $d$ in coordinate system units, such that the distance $d$ is less than or equal to the length $l = C_{S.L}(s)$ of segment $s$, i.e.\ $d \leq l$.

\subsection{Charging stations, demands and vehicles}
\label{sec:chargingstations-demands-vehicles}

In this Section, we describe charging stations, demands as well as vehicles. These concepts are visualized in Figure \ref{fig:chargingstations-demands-vehicles}.

\begin{figure}[htbp]
	\hfill
	\begin{subfigure}{.3\textwidth}
		\centering
		\includegraphics[scale=0.25]{../../concepts/charge-station.png}
		\caption{Charging station}
		\label{fig:charging-station}	
	\end{subfigure}
	\hfill
	\begin{subfigure}{.3\textwidth}
		\centering
		\includegraphics[scale=0.4]{../../concepts/demand.png}
		\caption{Demand}
		\label{fig:demand}
	\end{subfigure}
	\hfill
	\begin{subfigure}{.3\textwidth}
		\centering
		\includegraphics[scale=0.6]{../../concepts/vehicle.png}
		\caption{Vehicle}
		\label{fig:vehicle}	
	\end{subfigure}

	\caption{Charging stations, demands and vehicles.}
	\label{fig:chargingstations-demands-vehicles}	
\end{figure}

%\vspace{2mm}
\noindent \textbf{Charging stations} (see Figure \ref{fig:charging-station}) define locations on the transportation infrastructure, where vehicles can refill their batteries.
Mathematically, \textit{charging stations} can be described as elements $cs \in CS$ with the following static property functions $P_{CS}$:
\begin{itemize}
	\item $P_{CS.L}: CS \rightarrow L$ represents the location $l = P_{CS.L}(cs)$ of charging station $cs$, and
	\item $P_{CS.MCS}: CS \rightarrow \mathbb{R}^+$ represents the maximum charge speed $mcs = P_{CS.MCS}(cs)$ of charging station $cs$ in battery size units per time unit.
\end{itemize}
For charging stations, computer simulations typically sample the following dynamic state functions $S_{CS}$:
\begin{itemize}
	\item $S_{CS.CV}: CS \times \mathbb{T} \rightarrow V \cup \{\perp\}$ represents the current vehicle $v = S_{CS.CV}(cs, t)$ connected to charging station $cs$ and time $t$, and
	\item $S_{CS.CCS}: CS \times \mathbb{T} \rightarrow \mathbb{R}^+$ represents the current charge speed $ccs = S_{CS.CCS}(cs, t)$ at charging station $cs$ and time $t$ in battery size units per time unit, such that the current charge speed $ccs$ is smaller than or equal to the maximum charge speed $mcs$, i.e.\ $ccs \leq mcs$.
\end{itemize}

\noindent \textbf{Demands} (see Figure \ref{fig:demand}) define the transportation loads that temporarily consume the available transportation capacities.
Mathematically, \textit{demands} can be described as elements $d \in D$ with the following static property functions $P_{D}$:
\begin{itemize}
	\item $P_{D.S}: D \rightarrow \mathbb{R}^+$ represents the size $s = P_{D.S}(d)$ of demand $d$ in demand size units,
	\item $P_{D.AT}: D \rightarrow \mathbb{T}$ represents the appearance time $at = P_{D.AT}(d)$ of demand $d$ in time units,
	\item $P_{D.EPT}: D \rightarrow \mathbb{T}$ represents the earliest pick-up time $ept = P_{D.EPT}(d)$ of demand $d$ in time units, such that the earliest pick-up time $ept$ is greater than or equal to the appearance time $at$, i.e.\ $ept \geq at$,
	\item $P_{D.LDT}: D \rightarrow \mathbb{T}$ represents the latest drop-off time $ldt = P_{D.LDT}(d)$ of demand $d$ in time units, such that the latest drop-off time $ldt$ is greater than the earliest pick-up time $ept$, i.e.\ $ldt > ept$,
	\item $P_{D.PL}: D \rightarrow L$ represents the pick-up location $pl = P_{D.PL}(d)$ of demand $d$, and
	\item $P_{D.DL}: D \rightarrow L$ represents the drop-off location $dl = P_{D.DL}(d)$ of demand $d$, such that the drop-off location $dl$ is not equal to the pick-up location $pl$, i.e.\ $dl \neq pl$.
\end{itemize}
For demands, computer simulations typically sample the following dynamic state functions $S_{D}$:
\begin{itemize}
	\item $S_{D.CV}: D \times \mathbb{T} \rightarrow V \cup \{\perp\}$ represents the current vehicle $v = S_{D.CV}(d, t)$ carrying demand $d$ at time $t$, and
	\item $S_{D.CL}: D \times \mathbb{T} \rightarrow L$ represents the current location $cl = S_{D.CL}(d, t)$ of demand $d$ at time $t$.
\end{itemize}

\noindent \textbf{Vehicles} (see Figure \ref{fig:vehicle})  define the transportation capacities available on the transportation infrastructure.
Mathematically, \textit{vehicles} can be described as elements $v \in V$ with the following static property functions $P_{V}$:
\begin{itemize}
	\item $P_{V.L}: V \rightarrow \mathbb{R}_0^+$ represents the length $l = P_{V.L}(v)$ of vehicle $v$ in coordinate system units,
	\item $P_{V.W}: V \rightarrow \mathbb{R}_0^+$ represents the width $w = P_{V.W}(v)$ of vehicle $v$ in coordinate system units,
	\item $P_{V.MDL}: V \rightarrow \mathbb{R}^+$ represents the maximum demand level $mdl = P_{V.MDL}(v)$ of vehicle $v$ in demand size units,
	\item $P_{V.MBL}: V \rightarrow \mathbb{R}^+$ represents the maximum battery level $mbl = P_{V.MBL}(v)$ of vehicle $v$ in battery size units,
	\item $P_{V.MDS}: V \rightarrow \mathbb{R}^+$ represents the maximum drive speed $mds = P_{V.MDS}(v)$ of vehicle $v$ in coordinate system units per time units,
	\item $P_{V.MCS}: V \rightarrow \mathbb{R}^+$ represents the maximum charge speed $mcs = P_{V.MCS}(v)$ of vehicle $v$ in battery size units per time units,
	\item $P_{V.IL}: V \rightarrow L$ represents the initial location $il = P_{V.IL}(v)$ of vehicle $v$, and
	\item $P_{V.IBL}: V \rightarrow \mathbb{R}_0^+$ represents the initial battery level $ibl = P_{V.IBL}(v)$ of vehicle $v$ in battery size units, such that the initial battery level $ibl$ is smaller than or equal to the maximum battery level $mbl$, i.e.\ $ibl \leq mbl$.
\end{itemize}
For vehicles, computer simulations typically sample the following dynamic state functions $S_{V}$:
\begin{itemize}
	\item $S_{V.CL}: V \times \mathbb{T} \rightarrow L$ represents the current location $cl = S_{V.CL}(v, t)$ of vehicle $v$ at time $t$,
	\item $S_{V.CBL}: V \times \mathbb{T} \rightarrow \mathbb{R}_0^+$ represents the current battery level $cbl = S_{V.CBL}(v, t)$ of vehicle $v$ at time $t$ in battery size units, such that the current battery level $cbl$ is smaller than or equal to the maximum batter level $mbl$, i.e.\ $cbl \leq mbl$, and
	\item $S_{V.CDS}: V \times \mathbb{T} \rightarrow \mathbb{R}_0^+$ represents the current drive speed $cds = S_{V.CDS}(v, t)$ of vehicle $v$ at time $t$ in coordinate system units per time unit, such that the current drive speed $cds$ is smaller than or equal to the maximum drive speed $mds$, i.e.\ $cds \leq mds$.
\end{itemize}

\section{Discrete events}
\label{sec:events}

Based on the system theory from Section~\ref{sec:theory} we introduce our discerete event formalism.
In our formalism, we distinguish between location events (see Section~\ref{sec:location-events}), demand events (see Section~\ref{sec:demand-events}), speed events (see Section~\ref{sec:speed-events}) and battery events (see Section~\ref{sec:battery-events}).

\subsection{Location events}
\label{sec:location-events}

TODO

\subsubsection{Vehicle-intersection location events}
\label{sec:intersection-location-event}

This section describes routing events, which occur based on vehicle positioning at the start or the end of segments, and which are visualized in Figure \ref{fig:routing-events}. 

\begin{figure}[htbp]
	\centering
	\begin{subfigure}{.45\textwidth}
		\centering
		\includegraphics[scale=0.35]{../../events/vehicle-at-intersection-before.png}
		\caption{Vehicle arrives at intersection.}
		\label{fig:vehicle-at-intersection-before}
	\end{subfigure}
	\begin{subfigure}{.45\textwidth}
		\centering
		\includegraphics[scale=0.35]{../../events/vehicle-at-intersection-after.png}
		\caption{Vehicle departs at intersection.}
		\label{fig:vehicle-at-intersection-after}
	\end{subfigure}
	\caption{Vehicle-intersection location events.}
	\label{fig:routing-events}
\end{figure}

%\vspace{2mm}
\noindent \textbf{Vehicle arrives at intersection} (see Figure \ref{fig:vehicle-at-intersection-before}) occurs at time $t \in T$ if and only if there exists a vehicle $v \in V$ and a location $(s,d) \in L$ with segment $s \in S$ and traveled distance $d \in \mathbb{R}_0^+$ such that the vehicle $v$ at time $t$ is at location $(s,d)$, i.e. $S_{V.CL}(v,t) = (s,d)$, and the traveled distance $d$ on segment $s$ equals the length of the segment $s$, i.e. $P_{S.L}(s) = d$.

\vspace{2mm}
\noindent \textbf{Vehicle departs at intersection} (see Figure \ref{fig:vehicle-at-intersection-after}) occurs at time $t \in T$ if and only if there exists a vehicle $v \in V$ and a location $(s,d) \in L$ with segment $s \in S$ and traveled distance $d \in \mathbb{R}_0^+$ such that the vehicle $v$ at time $t$ is at location $(s,d)$, i.e. $S_{V.CL}(v,t) = (s,d)$, and the traveled distance $d$ on segment $s$ is zero, i.e. $d = 0$.

\vspace{2mm}
\noindent \textit{Note that each vehicle arrives at intersection event occurs concurrently with a follow-up vehicle departs at intersection event.}

\subsection{Vehicle-charging station location events}
\label{sec:charging-station-location-events}

TODO

\vspace{2mm}
\noindent \textbf{Vehicle arrives at charging station} occurs at time $t \in T$ if and only if there exists a vehicle $v \in V$ and a charging station $cs \in CS$ with location $l = P_{CS.L}(cs)$, such that the vehicle $v$ at time $t$ is at location $l$, i.e. $S_{V.CL}(v, t) = l$, and for all previous times $t' \in T$ with $t' < t$ where vehicle $v$ was at location $l$, i.e. $S_{V.CL}(v, t') = l$, there exists an intermediate time $t'' \in T$ with $t' < t'' < t$, such that vehicle $v$ was not at location $l$, i.e. $S_{V.CL}(v, t'') \neq l$.

\subsubsection{Vehicle-demand location events}
\label{sec:demand-location-events}

TODO

\begin{figure}[htbp]
    \centering
	\begin{subfigure}{.45\textwidth}
		\centering
		\includegraphics[scale=0.35]{../../events/vehicle-at-demand-pick-up.png}
		\caption{Vehicle at demand pick-up.}
		\label{fig:vehicle-at-demand-pick-up}
	\end{subfigure}
	\begin{subfigure}{.45\textwidth}
		\centering
		\includegraphics[scale=0.35]{../../events/vehicle-at-demand-drop-off.png}
		\caption{Vehicle at demand drop-off.}
		\label{fig:vehicle-at-demand-drop-off}
	\end{subfigure}
	\caption{Vehicle-demand location events.}
	\label{fig:demand-events}	
\end{figure}

%\vspace{2mm}
\noindent \textbf{Vehicle arrives at demand pick-up location} (see Figure \ref{fig:vehicle-at-demand-pick-up}) occurs at time $t \in T$ if and only if there exists a vehicle $v \in V$ and a demand $d \in D$ with demand pick-up location $l_d^{PULT}$, such that the vehicle $v$ at time $t$ is at demand pick-up location, i.e. $S_{V.CL}(v, t) = l_d^{PULT}$, and for all previous times $t' \in T$ with $t' < t$ where vehicle $v$ was at location $l_d^{PULT}$, i.e. $S_{V.CL}(v, t') = l_d^{PULT}$, there exists an intermediate time $t'' \in T$ with $t' < t'' < t$, such that vehicle $v$ was not at location $l_d^{PULT}$, i.e. $S_{V.CL}(v, t'') \neq l_d^{PULT}$.

\vspace{2mm}
\noindent \textbf{Vehicle arrives at demand drop-off location} (see Figure \ref{fig:vehicle-at-demand-drop-off}) occurs at time $t \in T$ if and only if there exists a vehicle $v \in V$ and a demand $d \in D$ with demand drop-off location $l_d^{DOLT}$, such that the vehicle $v$ at time $t$ is at demand drop-off location, i.e. $S_{V.CL}(v, t) = l_d^{DOLT}$, and for all previous times $t' \in T$ with $t' < t$ where vehicle $v$ was at location $l_d^{DOLT}$, i.e. $S_{V.CL}(v, t') = l_d^{DOLT}$, there exists an intermediate time $t'' \in T$ with $t' < t'' < t$, such that vehicle $v$ was not at location $l_d^{DOLT}$, i.e. $S_{V.CL}(v, t'') \neq l_d^{DOLT}$.

\subsubsection{Vehicle-vehicle location events}
\label{sec:vehicle-location-events}

This section subsequently describes driving and overtaking events which occur between multiple vehicles, where former are visualized in Figure \ref{fig:overtaking-events}.

\begin{figure}[htbp]
	\centering
	\begin{subfigure}{.45\textwidth}
        \centering
        \includegraphics[scale=0.35]{../../events/faster-vehicle-front-at-slower-vehicle-back.png}
        \caption{Faster vehicle arrives at slower vehicle}
        \label{fig:faster-vehicle-front-at-slower-vehicle-back}
	\end{subfigure}
	\begin{subfigure}{.45\textwidth}
        \centering
        \includegraphics[scale=0.35]{../../events/slower-vehicle-front-at-faster-vehicle-back.png}
        \caption{Faster vehicle departs at slower vehicle}
        \label{fig:slower-vehicle-front-at-faster-vehicle-back}
	\end{subfigure}
	\caption{Vehicle-vehicle location events.}
	\label{fig:overtaking-events}
\end{figure}

%\vspace{2mm}
\noindent \textbf{Faster vehicle arrives at slower vehicle} (see Figure \ref{fig:faster-vehicle-front-at-slower-vehicle-back}) occurs at time $t \in T$ if and only if there exists a faster vehicle $v_{f} \in V$ as well as a slower vehicle $v_{s} \in V$, such that 
\begin{enumerate}
    \item the current drive speed of the faster vehicle $v_{f}$ at time $t$ is greater than the current drive speed of the slower vehicle $v_{s}$, i.e. $ S_{V.CDS}(v_{f},t) > S_{V.CDS}(v_{s},t)$, and
    \item the locations of the vehicles at time $t$, i.e. $S_{V.CL}(v_{f},t) = (s_{vf}, d_{vf})$ and  $S_{V.CL}(v_{s},t) = (s_{vs}, d_{vs})$ are such that the segments $s_{vf}, s_{vs}$ of both faster and slower vehicle match, and the travelled distance of the faster vehicle plus the faster vehicles half-length equals the travelled distance of the slower vehicle minus the slower vehicles half-length, i.e. $d_{vf} + \frac{P_{V.L}(v_{vf})}{2} = d_{vs} - \frac{P_{V.L}(v_{vs})}{2}$.
\end{enumerate}

\noindent \textbf{Faster vehicle departs at slower vehicle} (see Figure \ref{fig:slower-vehicle-front-at-faster-vehicle-back}) occurs at time $t \in T$ if and only if there exists a faster vehicle $v_{f} \in V$ as well as a slower vehicle $v_{s} \in V$, such that 
\begin{enumerate}
	\item the current drive speed of the faster vehicle $v_{f}$ at time $t$ is greater than the current drive speed of the slower vehicle $v_{s}$, i.e. $ S_{V.CDS}(v_{f},t) > S_{V.CDS}(v_{s},t)$, and
	\item the locations of the vehicles at time $t$, i.e. $S_{V.CL}(v_{f},t) = (s_{vf}, d_{vf})$ and  $S_{V.CL}(v_{s},t) = (s_{vs}, d_{vs})$ are such that the segments $s_{vf}, s_{vs}$ of both faster and slower vehicle match, and the travelled distance of the faster vehicle minus the faster vehicles half-length equals the travelled distance of the slower vehicle plus the slower vehicles half-length, i.e. $d_{vf} - \frac{P_{V.L}(v_{vf})}{2} = d_{vs} + \frac{P_{V.L}(v_{vs})}{2}$.
\end{enumerate}

\subsection{Demand events}
\label{sec:demand-events}

This section describes demand events which occur based on demand appearance or vehicle positioning at demand pick-up or demand drop-off locations, which are visualized in Figure \ref{fig:demand-events}, and which we describe subsequently.

\vspace{2mm}
\noindent \textbf{Demand appears} occurs at time $t \in T$ if and only if there exists a vehicle $v \in V$ and a demand $d \in D$, such that the demand $d$ at time $t$ doesn't have an assigned current vehicle $v$, i.e. $S_{D.CV}(d, t) = \{\perp\}$, and such that the demands appear time $P_{D.AT}$ equals the current time $t$, i.e. $P_{D.AT} = t$.

\subsection{Speed events}
\label{sec:speed-events}

TODO

\vspace{2mm}
\noindent \textbf{Vehicle drive speed changes} occurs at time $t \in T$ if and only if there exists a vehicle $v \in V$ with current drive speed $S_{V.CDS}(v, t)$, such that for all previous times $t' \in T$ with $t' < t$, where the current drive speed $S_{V.CDS}(v,t')$ of vehicle $v$ at time $t'$ was identical, i.e. $S_{V.CDS}(v,t') = S_{V.CDS}(v,t)$, there exists an intermediate time $t'' \in T$ with $t' < t'' < t$, such that the current drive speed $S_{V.CDS}(v,t'')$ of vehicle $v$ at time $t''$ is different, i.e. $S_{V.CDS}(v,t'') \neq S_{V.CDS}(v,t)$.

\vspace{2mm}
\noindent \textbf{Vehicle charge speed changes} occurs at time $t \in T$ if and only if there exists a vehicle $v \in V$ with current charge speed $S_{V.CCS}(v, t)$, such that for all previous times $t' \in T$ with $t' < t$, where the current charge speed $S_{V.CCS}(v,t')$ of vehicle $v$ at time $t'$ was identical, i.e. $S_{V.CCS}(v,t') = S_{V.CCS}(v,t)$, there exists an intermediate time $t'' \in T$ with $t' < t'' < t$, such that the current charge speed $S_{V.CCS}(v,t'')$ of vehicle $v$ at time $t''$ is different, i.e. $S_{V.CCS}(v,t'') \neq S_{V.CCS}(v,t)$.


\subsection{Battery events}
\label{sec:battery-events}

This section describes battery events which occur based on vehicle battery level. We describe these events subsequently.

\vspace{2mm}
\noindent \textbf{Vehicle battery becomes empty} occurs at time $t \in T$ if and only if there exists a vehicle $v \in V$ such that the current battery level of vehicle $v$ at time $t$ is zero, i.e. $S_{V.CBL}(v,t) = 0$ and for all previous times $t' \in T$ with $t' < t$, where the current battery level of vehicle $v$ was zero, i.e. $S_{V.CBL}(v,t') = 0$, there exists an intermediate time $t'' \in T$ with $t' < t'' < t$, such that the current battery level of vehicle $v$ was not zero, i.e. $S_{V.CBL}(v,t'') \neq 0$.

\vspace{2mm}
\noindent \textbf{Vehicle battery becomes full} occurs at time $t \in T$ if and only if there exists a vehicle $v \in V$ such that the current battery level of vehicle $v$ at time $t$ equals the maximum battery level of vehicle $v$, i.e. $S_{V.CBL}(v,t) = P_{V.MBL}(v)$, and for all previous times $t' \in T$ with $t' < t$, where the current battery level of vehicle $v$ equals the maximum battery level of vehicle $v$, i.e. $S_{V.CBL}(v,t') = P_{V.MBL}(v)$, there exists an intermediate time $t'' \in T$ with $t' < t'' < t$, such that the current battery level of vehicle $v$ does not equal the maximum battery level of vehicle $v$, i.e. $S_{V.CBL}(v,t'') \neq P_{V.MBL}(v)$.

\section{Conclusion and outlook}
\label{sec:con}

In this work, we presented a formalization of essential static properties, dynamic state functions, as well as events concisely describing transportation system design space in the scope of emerging transportation paradigms such as autonomous vehicles, demand-responsive transport and the transportation electrification.
Our proposed formalization allows for reduction of simulation complexity by focusing on relevant events impacting the design problem at hand only, while omitting unimportant details negatively impacting simulation performance, thereby reducing both modeling and simulation effort.
In addition, the provided formalization of system theory and discrete events serves as an interface for deriving well-defined system structure and efficient control strategies.
Future work includes demonstration as well as approach application for deriving control strategies based on our proposed formalization.

\bibliographystyle{plain}
\bibliography{main}

\end{document}